R, C = input().split(" ")
R = int(R)
C = int(C)

X, Y = input().split(" ")
X = int(X)
Y = int(Y)

partialSums = []
# ipotizzo x < y => horiz: x*y, vert: y*x
horiz = []
vert = []
vertHmaxs = [0]*R
vertVmaxs = [0]*C
for r in range(R):
    row = input().split(" ")
    partialSums.append([0] * C)
    horiz.append([0] * C)
    vert.append([0] * C)
    for c, val in enumerate(row):
        sum = int(val)
        if c > 0:
            sum += partialSums[r][c - 1]
        if r > 0:
            sum += partialSums[r - 1][c]
        if r > 0 and c > 0:
            sum -= partialSums[r - 1][c - 1]
        partialSums[r][c] = sum
        
        if r >= X-1 and c >= Y-1:
            horiz[r][c] = partialSums[r][c]
            if c >= Y:
                horiz[r][c] -= partialSums[r][c-Y]
            if r >= X:
                horiz[r][c] -= partialSums[r-X][c]
            if r >= X and c >= Y:
                horiz[r][c] += partialSums[r-X][c-Y]
                
        if r >= Y-1 and c >= X-1:
            vert[r][c] = partialSums[r][c]
            if c >= X:
                vert[r][c] -= partialSums[r][c-X]
            if r >= Y:
                vert[r][c] -= partialSums[r-Y][c]
            if r >= Y and c >= X:
                vert[r][c] += partialSums[r-Y][c-X]
                
            vertHmaxs[r] = max(vertHmaxs[r], vert[r][c])
            vertVmaxs[c] = max(vertVmaxs[c], vert[r][c])
    

maxSum = -1;
for r2 in range(Y-1, R):
    for c2 in range(X-1, C):
        maxSum = max(maxSum, vert[r2][c2])
    

for r1 in range(X-1, R):
    for c1 in range(Y-1, C):
        
        hormaxcand = horiz[r1][c1]
        
        vertmax = -1
        
        # from Y-1 → r1-X; r1+Y → R-1
        r2 = Y - 1
        while r2 < R:
            if r2 > r1 - X and r2 < r1 + Y:
                r2 = r1 + Y
                continue
            # print(f"Testing r2 = {r2}")
            vertmax = max(vertmax, vertHmaxs[r2])
            r2 += 1
        
        # from X-1 → c1-Y; c1+X → C-1
        c2 = X - 1
        while c2 < C:
            if c2 > c1 - Y and c2 < c1 + X:
                c2 = c1 + X
                continue
            # print(f"Testing c2 = {c2}")
            vertmax = max(vertmax, vertVmaxs[c2])
            c2 += 1
            
        maxSum = max(maxSum, vertmax + hormaxcand)
        
print(maxSum)

